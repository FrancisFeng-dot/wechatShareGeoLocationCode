# 微信H5页面分享实例代码，地理定位地址获取实例代码

<font size="1"><div>一、调用微信分享，需要先引入http://res.wx.qq.com/open/js/jweixin-1.0.0.js文件</div><div>1.分享之前用户要手动获取签名（common.php）</div><div>微信开发文档中有，大致流程如下：</div><div>先代入appid和appsecret,调用https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&amp;appid，拿到access_token；</div><div>然后代入access_token，调用https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token=，拿到票据ticket，返回给前端。</div><div><br></div><div>2.html中声明API，配置相关参数</div><div>wx.checkJsApi({</div><div>&nbsp; &nbsp; jsApiList: [</div><div>&nbsp; &nbsp; &nbsp; &nbsp; 'getNetworkType',</div><div>&nbsp; &nbsp; &nbsp; &nbsp; 'previewImage',</div><div>&nbsp; &nbsp; &nbsp; &nbsp; 'onMenuShareTimeline',</div><div>&nbsp; &nbsp; &nbsp; &nbsp; 'onMenuShareAppMessage',//声明分享的API</div><div>&nbsp; &nbsp; &nbsp; &nbsp; 'onMenuShareQQ',</div><div>&nbsp; &nbsp; &nbsp; &nbsp; 'onMenuShareWeibo',</div><div><br></div><div>&nbsp;wx.onMenuShareAppMessage({//代入分享参数</div><div>&nbsp; &nbsp; &nbsp; &nbsp; title: '{$news.Title}',</div><div>&nbsp; &nbsp; &nbsp; &nbsp; desc: '{$news.Description}',</div><div>&nbsp; &nbsp; &nbsp; &nbsp; link: '{$news.Url}',</div><div>&nbsp; &nbsp; &nbsp; &nbsp; imgUrl: '{$news.PicUrl}',</div><div>&nbsp; &nbsp; &nbsp; &nbsp; trigger: function (res) {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; },</div><div>&nbsp; &nbsp; &nbsp; &nbsp; success: function (res) {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; }</div><div>&nbsp; &nbsp; });</div><div><br></div><div>二、获取地理定位和详细地址，需要引入http://map.qq.com/api/js?v=2.exp</div><div>代码中要声明API如下：</div><div>wx.checkJsApi({</div><div>&nbsp; &nbsp;jsApiList: [</div><div>&nbsp; &nbsp; &nbsp; 'getLocation',//获取地理位置接口</div><div>&nbsp; &nbsp; &nbsp; 'openLocation'//使用微信内置地图查看地理位置接口</div><div><br></div><div>调用的时候如下操作：</div><div>//调用获取详细地址</div><div>const geocoder = new qq.maps.Geocoder({</div><div><br></div><div>//调用城市服务信息</div><div>const citylocation = new qq.maps.CityService({</div><div><br></div><div>txt文件是提炼html的内容，方便直接使用</div></font>
